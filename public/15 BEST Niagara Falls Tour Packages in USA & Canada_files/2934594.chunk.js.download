(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{1169:function(t,e,r){"use strict";r.r(e);var l=r(181),n=r(14),o=r(5),c=(r(540),r(30),r(13),r(23),r(19),r(129),r(37),r(318),r(16),r(590)),d=["filters"],h=["d"];function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,l)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var v={name:"SearchPageResult",components:{MySearchHeader:c.a,MySearchFilter:()=>r.e(9).then(r.bind(null,1189)),MySearchProductList:()=>r.e(21).then(r.bind(null,1210)),MySearchFastLink:()=>r.e(134).then(r.bind(null,1217)),MyCustomPopup:()=>r.e(0).then(r.bind(null,1191)),MyScrollToTop:()=>r.e(10).then(r.bind(null,1192))},middleware:["Redirect"],asyncData:t=>Object(o.a)((function*(){var e,r,n,{route:o,params:c,query:h,$parseUrl:f,$axios:v,$promiseAllSettled:y,$parseUrlQuery:A,store:C,$GA4PageGroupEvent:w}=t,P="",S={};P=(n=f(c.path)).d,S.type="destination",!n.d&&n.i&&(S.type="itinerary",P=n.i);["chichen-itza-machu-picchu-chapultepec-ecuador-peru-mexico-brazil-chile-argentina","east-coast-tour-for-indian-parents","europe-tour-indian-food"].includes(n.d)&&(S.type="other",P=n.d),S.keyword=P;var F=A(h,n),{d:_,in:I,s:s,visit:k,stay:T,i:i,from:x,type:O,g:g}=n,D={urlPath:"sp",destination:C.state.specialGroupType?g:_,stay:(null==T?void 0:T.join("-"))||"",tab:O,visit:k,from:x,in:I,s:s,i:i,url:"https://www.tours4fun.com"+o.path},j=Number(h.page)||1,M=m(m({},F),{},{page:j,pageSize:15,type:C.state.specialGroupType?"":S.type,keyword:P}),G=v.post("/api/search/info/v2",m(m(m({},D),S),{},{infoUrl:"/sp/".concat(c.path,"/")})),U=v.post("/api/search/list",M),[B,L]=yield y([U,G]),E=L.data.filters,R={};if(E){var{filters:$=[]}=E,V=Object(l.a)(E,d);$.forEach((t=>{R[t.type]=t.items})),Object.keys(V).forEach((t=>{R[t]=V[t]}))}var N=L.data.searchInfo||{},K=(html=>html.replace(/<[^>]*>/g,""))(N.description||"").replace(/\s+/g," ").replace(/\n+/g," ").trim();return w({pageGroup1:"Category",pageGroup2:"Category_Destination",pageGroup3:P}),{keyword:P,pathParams:n,tdk:L.data.tdk||{},filters:R,filterItems:F,productList:(null==B||null===(e=B.data)||void 0===e?void 0:e.products)||[],total:(null==B||null===(r=B.data)||void 0===r?void 0:r.total)||0,page:j,pageDescription:K,searchPageInfo:N,searchType:S.type}}))(),data:()=>({filterPopupVisible:!1,filterPopupType:"",keyword:"",pathParams:{},tdk:{},filters:{},filterItems:{},productList:[],total:0,page:1,pageDescription:"",searchPageInfo:{},blogData:{},searchType:"destination"}),head(){var link=[],t=[];t.push({"@type":"ListItem",position:1,item:{"@type":"WebPage","@id":"https://www.tours4fun.com".concat("es"===this.$i18n.locale?"/es":"/"),name:"Home"}}),this.searchPageInfo.urlPath.forEach(((e,r)=>{t.push({"@type":"ListItem",position:r+2,item:{"@type":"WebPage","@id":"".concat("https://www.tours4fun.com").concat(this.getBreadcrumbUrl(e)),name:e.name}})}));var e=[];return this.productList.forEach(((t,r)=>{if(link.push({rel:"preload",as:"image",fetchpriority:"high",href:this.$getImageUrl(t.imageUrl,635,165)}),r<3&&1===t.stockStatus){var l={"@type":"ListItem",position:r+1,item:{"@type":"Product",name:t.productName,url:"".concat("https://www.tours4fun.com").concat("es"===this.$i18n.locale?"/es/":"/").concat(t.urlPath),image:t.imageUrl,description:t.seoHeadDesc,brand:{"@type":"Organization",name:"Tours4fun"},offers:{"@type":"Offer",priceCurrency:"USD",price:t.displayPrice,availability:"https://schema.org/InStock"}}};Number(t.reviewCount)>0&&(l.item.aggregateRating={"@type":"AggregateRating",ratingValue:t.reviewStar,reviewCount:t.reviewCount}),e.push(l)}})),{title:this.tdk.metaTitle,meta:[{hid:"description",name:"description",content:this.tdk.description}],script:[{hid:"ld+json-item",type:"application/ld+json",json:{"@context":"https://schema.org","@type":"ItemList",name:"".concat(this.keyword," Packages"),itemListElement:e}},{hid:"ld+json-breadcrumb",type:"application/ld+json",json:{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:t}}],link:link}},computed:{getHeaderTitle(){var t;return this.$store.state.specialGroupType?null===(t=this.$getGroupType())||void 0===t||null===(t=t.find((i=>{var t;return i.type===(null===(t=this.$store.state.specialGroupType)||void 0===t?void 0:t[0])})))||void 0===t?void 0:t.h1Title:this.tdk.h1Title},isStaticPathUrl(){var t=this.pathParams,{d:e}=t,r=Object(l.a)(t,h);return Object.keys(r).length>0},getShowFields(){var t=["sort","category","startCity","endCity","cityAndAttraction","departureDate","departureMonth","duration","language","groupType","groupSize","tourStyle","price","specials","safeBook"];if("filter"===this.filterPopupType)return t.filter((t=>!["startCity","endCity","cityAndAttraction","departureDate","departureMonth","duration"].includes(t)));if("place"===this.filterPopupType)return["startCity","endCity","cityAndAttraction"];if("date"===this.filterPopupType)return["departureDate","departureMonth","duration"];var e={departureMonth:"in",cityAndAttraction:"visit",duration:"stay",startCity:"from",endCity:"to",category:"type",beginDate:"in"};return t.filter((t=>!(this.pathParams[e[t]]||["beginDate","departureMonth"].includes(t)&&this.pathParams.s)))}},mounted(){this.getBlogData()},methods:{getBreadcrumbUrl(t){if(t.name&&t.url){var e=t.url?"/sp/d-".concat(t.url,"/"):"/sp/d-".concat(t.name.split(" ").map((t=>t.toLowerCase())).join("-"),"/");return this.$displaySiteUrl(e.endsWith("/")?e:"".concat(e,"/"))}return"/"},openFilterPopup(t){this.filterPopupVisible=!0,this.filterPopupType=t},clearAllFilters(t){var e,r;null===(e=this.$refs.filter)||void 0===e||e.clearAllFilters(t),null===(r=this.$refs.filterMobile)||void 0===r||r.clearAllFilters(t)},filterChange(t){this.filterItems=t,this.$refs.productListRef.handleRequestList()},getBlogData(){var t=this;return Object(o.a)((function*(){var e=yield t.$axios.get("/api/search/blog/info",{params:{url:t.pathParams.d}});t.blogData=e.data.data||{}}))()}}},y=(r(922),r(63)),component=Object(y.a)(v,(function(){var t,e=this,l=e._self._c;return l("div",{attrs:{id:"search-page-result"}},[l("div",{staticClass:"content-wrapper"},[e.searchPageInfo.urlPath&&e.searchPageInfo.urlPath.length?l("el-breadcrumb",{staticClass:"breadcrumb-wrapper",attrs:{"separator-class":"el-icon-arrow-right"}},[l("el-breadcrumb-item",{attrs:{to:"/"}},[l("a",{attrs:{href:"/"}},[e._v("Home")])]),e._v(" "),e.$store.state.specialGroupType?[l("el-breadcrumb-item",[e._v("\n                    "+e._s(null===(t=e.$getGroupType())||void 0===t||null===(t=t.find((i=>{var t;return i.type===(null===(t=e.$store.state.specialGroupType)||void 0===t?void 0:t[0])})))||void 0===t?void 0:t.title)+"\n                ")])]:[e._l(e.searchPageInfo.urlPath,(function(t,r){return l("el-breadcrumb-item",{key:r,attrs:{to:{path:e.getBreadcrumbUrl(t)}}},[l("a",{attrs:{href:e.getBreadcrumbUrl(t)}},[e._v("\n                        "+e._s(t.name)+"\n                    ")])])})),e._v(" "),l("el-breadcrumb-item",[e._v(" Tours")])]],2):e._e(),e._v(" "),l("MySearchHeader",{attrs:{title:e.getHeaderTitle,description:e.pageDescription,"super-search":!1,"filter-items":e.filterItems,filters:e.filters,total:e.total},on:{openFilterPopup:e.openFilterPopup,clearAllFilters:e.clearAllFilters}}),e._v(" "),l("div",{staticClass:"content"},[l("div",{staticClass:"filter-wrapper"},[l("MySearchFilter",{ref:"filter",attrs:{"path-params":e.pathParams,filters:e.filters,total:e.total,"blog-data":e.blogData,"show-fields":e.getShowFields},on:{change:e.filterChange}})],1),e._v(" "),l("MySearchProductList",{ref:"productListRef",attrs:{keyword:e.keyword,"filter-params":e.filterItems,"server-product-list":e.productList,total:e.total,"search-type":e.searchType,page:e.page,position:"Destination_".concat(e.pathParams.d)},on:{"update:total":function(t){e.total=t},"update:page":function(t){e.page=t}}})],1),e._v(" "),l("MySearchFastLink",{attrs:{"is-static-path-url":e.isStaticPathUrl,filters:e.filters,destination:e.pathParams.d,"page-seo-info":e.searchPageInfo,"blog-data":e.blogData}})],1),e._v(" "),l("MyCustomPopup",{attrs:{width:768,"custom-title":!0},on:{closed:function(t){e.filterPopupType=""}},scopedSlots:e._u([{key:"title",fn:function(){return[l("div",{staticClass:"filter-popup-title"},["filter"===e.filterPopupType?[l("img",{staticClass:"icon",attrs:{src:r(578),alt:""}}),e._v(" "),l("span",{staticClass:"filter-item-text"},[e._v(" Filters ")])]:e._e(),e._v(" "),"place"===e.filterPopupType?[l("img",{staticClass:"icon",attrs:{src:r(595),alt:""}}),e._v(" "),l("span",{staticClass:"filter-item-text"},[e._v(" Place ")])]:e._e(),e._v(" "),"date"===e.filterPopupType?[l("img",{staticClass:"icon",attrs:{src:r(596),alt:""}}),e._v(" "),l("span",{staticClass:"filter-item-text"},[e._v(" Date & Length ")])]:e._e()],2)]},proxy:!0}]),model:{value:e.filterPopupVisible,callback:function(t){e.filterPopupVisible=t},expression:"filterPopupVisible"}},[e._v(" "),l("div",{staticClass:"filter-popup-content"},[l("MySearchFilter",{ref:"filterMobile",attrs:{"path-params":e.pathParams,filters:e.filters,total:e.total,"show-fields":e.getShowFields},on:{change:e.filterChange,seeResults:function(t){e.filterPopupVisible=!1}}})],1)]),e._v(" "),l("MyScrollToTop")],1)}),[],!1,null,"dc365f6a",null);e.default=component.exports},540:function(t,e,r){"use strict";var l=r(3),n=r(22),o=r(7),c=r(4),d=r(21),h=r(8),f=r(78),m=r(17),v=r(179),y=r(311),A=o.Symbol,C=A&&A.prototype;if(n&&h(A)&&(!("description"in C)||void 0!==A().description)){var w={},P=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:m(arguments[0]),e=f(C,this)?new A(t):void 0===t?A():A(t);return""===t&&(w[e]=!0),e};y(P,A),P.prototype=C,C.constructor=P;var S="Symbol(description detection)"===String(A("description detection")),F=c(C.valueOf),_=c(C.toString),I=/^Symbol\((.*)\)[^)]+$/,k=c("".replace),T=c("".slice);v(C,"description",{configurable:!0,get:function(){var symbol=F(this);if(d(w,symbol))return"";var t=_(symbol),desc=S?T(t,7,-1):k(t,I,"$1");return""===desc?void 0:desc}}),l({global:!0,constructor:!0,forced:!0},{Symbol:P})}},555:function(t,e,r){t.exports={}},578:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAYFJREFUWEftmNtVxCAQhiFpQCswgQa0A+1AO1hLsBJL2GMFbgfagVZA0sGmgTAuno1nJZOcIVySB/LKJR//MPMDnG384xvnYxnQN0KoglVVVWVZ7gHgljF2xTk/9H3/0rZt6/tD1/EjQANXFMWXAbMm67TWd6khR4BSyncAeMRWCgCfTdM8DG1Syh0A3LiqgvXXWpu1v9ltI0AhBMz8sFNKXZv2M9w+BNwwxwlyZ0NigEckvH8cSqnfMasB1nX9wTm/n1DmoJR6WjXEm08So84Z8pUxZpKlOyXNNwA8p85gw5KdxDfLs4KrKpjCsxeHOFU5QgExj7W9MrRnk714zsIuvTKGZ5O82AEwuGeTAC8OAv+OUXYIQns2OcTUsrBqkjhCRvXsxWWGugjffhkwK+irADbexcOT70HX8kT24qVK+ng4euSPfZ2kevggCPayYF4Lol3IhRAkD58EnPLiUCF28fBVbnVBkmSpWtRxLvfu5GWGuojZPeg6Scz+WUFfdX8AEKt8OHJnaw8AAAAASUVORK5CYII="},579:function(t,e,r){"use strict";r(555)},590:function(t,e,r){"use strict";r(540),r(30),r(31),r(128);var l={name:"MySearchHeader",props:{title:{type:String,default:""},titleTag:{type:String,default:"h2"},superSearch:{type:Boolean,default:!1},description:{type:String,default:""},filterItems:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({})},total:{type:Number,default:0},showFields:{type:Array,default:()=>["filter","place","date"]}},data:()=>({infoEllipsis:!1,isShowAll:!1,fomatFilterItems:[]}),fetch(){this.fomatFilterItems=this.getFormatFilterItems()},computed:{isFilterActive(){return this.fomatFilterItems.filter((i=>["category","language","tourStyle","price","special","productQuality","groupSize"].includes(i.name))).length>0},isPlaceActive(){return this.fomatFilterItems.filter((i=>["startCity","endCity","visitCityAndAttraction"].includes(i.name))).length>0},isDateActive(){return this.fomatFilterItems.filter((i=>["beginDate","departureMonth","duration"].includes(i.name))).length>0}},watch:{filterItems:{handler(){this.fomatFilterItems=this.getFormatFilterItems()},deep:!0}},mounted(){this.$nextTick((()=>{var t;this.infoEllipsis=(null===(t=this.$refs.locationInfo)||void 0===t||null===(t=t.getBoundingClientRect())||void 0===t?void 0:t.height)>45,this.fomatFilterItems=this.getFormatFilterItems()}))},methods:{getFormatFilterItems(){return Object.keys(this.filterItems).reduce(((t,e)=>{var r=this.filterItems[e];if(Array.isArray(r))r.forEach((r=>{t.push({name:e,text:this.getFilterItemText(e,r),value:r})}));else if("minPrice"===e||"minDuration"===e){var l="minPrice"===e?[this.filterItems.minPrice,this.filterItems.maxPrice]:[this.filterItems.minDuration,this.filterItems.maxDuration];l[1]&&t.push({name:e,text:this.getFilterItemText(e,l),value:l})}else t.push({name:e,text:this.getFilterItemText(e,r),value:r});return t}),[]).filter((t=>t.text))},showAll(){this.infoEllipsis=!this.infoEllipsis,this.isShowAll=!this.isShowAll},getFilterItemText(t,e){var r,l,n,o,c,d,h,f,m,v,y=this.$parseUrl();if(!e||y[{departureMonth:"in",visitCityAndAttraction:"visit",duration:"stay",startCity:"from",endCity:"to",category:"type"}[t]]||"departureMonth"===t&&y.s)return null;var A="";switch(t){case"category":return null===(l=A=null===(r=this.filters.Tabs)||void 0===r?void 0:r.find((t=>t.type===e)))||void 0===l?void 0:l.show;case"startCitySingle":return"Starts in ".concat(e);case"endCitySingle":return"Ends in ".concat(e);case"visitCityAndAttraction":return"Goes through ".concat(e);case"language":return A=null===(n=this.filters.Languages)||void 0===n?void 0:n.find((t=>t.type===e)),"Language is ".concat(null===(o=A)||void 0===o?void 0:o.show);case"tourStyle":return"Tour style is ".concat(e);case"minPrice":return e[0]===e[1]?"Price is ".concat(this.$priceFormatter(e[0])):"Price is ".concat(this.$priceFormatter(e[0])," - ").concat(this.$priceFormatter(e[1]));case"minDuration":return e[0]===e[1]?"Duration is ".concat(e[0]," days"):"Duration is ".concat(e[0]," - ").concat(e[1]," days");case"beginDate":return"Departs on ".concat(e);case"departureMonth":return"Departs in ".concat(e);case"special":return null===(d=A=null===(c=this.filters.specials)||void 0===c?void 0:c.find((t=>t.value===e)))||void 0===d?void 0:d.title;case"productQuality":return this.$store.state.specialGroupType?null:(A=null===(h=this.filters.ProductQuality)||void 0===h?void 0:h.find((t=>t.type===e)),"Group Type is ".concat(null===(f=A)||void 0===f?void 0:f.show));case"groupSize":return A=null===(m=this.filters.GroupSize)||void 0===m?void 0:m.find((t=>t.type===e)),"Group Size is ".concat(null===(v=A)||void 0===v?void 0:v.show);default:return null}},clearAllFilters(t){this.$emit("clearAllFilters",t)}}},n=(r(579),r(63)),component=Object(n.a)(l,(function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"my-search-header"}},["h1"===t.titleTag?e("h1",{staticClass:"content-title"},[e("span",[t._v("\n            "+t._s(t.title)+"\n        ")])]):e("h2",{staticClass:"content-title"},[e("span",[t._v("\n            "+t._s(t.title)+"\n        ")])]),t._v(" "),t.description&&!t.superSearch?e("div",{staticClass:"location-info-wrapper",style:{maxHeight:t.isShowAll?"unset":"45px"}},[e("p",{ref:"locationInfo",staticClass:"location-info",class:{"ellipsis-two":t.infoEllipsis}},[t._v("\n            "+t._s(t.description)+"\n            "),e("span",{staticClass:"show-all",on:{click:t.showAll}},[t._v("\n                Show All\n            ")])])]):t._e(),t._v(" "),e("div",{staticClass:"filter-description"},[e("span",{staticClass:"filter-num"},[t._v(" "+t._s(t.total)+" results ")]),t._v(" "),t.fomatFilterItems.length?e("span",{staticClass:"filter-tool",on:{click:function(e){return t.clearAllFilters()}}},[t._v("\n            Clear all filters\n        ")]):t._e(),t._v(" "),t._l(t.fomatFilterItems,(function(r,l){return e("span",{key:l,staticClass:"filter-item"},[e("span",{staticClass:"filter-item-text"},[t._v("\n                "+t._s(r.text)+"\n            ")]),t._v(" "),e("span",{staticClass:"filter-item-icon",on:{click:function(e){return t.clearAllFilters(r)}}},[e("i",{staticClass:"el-icon-circle-close"})])])}))],2),t._v(" "),e("div",{staticClass:"mobile-filters",staticStyle:{display:"none"}},[t.showFields.includes("filter")?e("div",{staticClass:"filter-item-m filter",class:{active:t.isFilterActive},on:{click:function(e){return t.$emit("openFilterPopup","filter")}}},[e("div",{staticClass:"icon"}),t._v(" "),e("span",{staticClass:"filter-item-text"},[t._v(" Filters ")])]):t._e(),t._v(" "),t.showFields.includes("place")?e("div",{staticClass:"filter-item-m place",class:{active:t.isPlaceActive},on:{click:function(e){return t.$emit("openFilterPopup","place")}}},[e("div",{staticClass:"icon"}),t._v(" "),e("span",{staticClass:"filter-item-text"},[t._v(" Place ")])]):t._e(),t._v(" "),t.showFields.includes("date")?e("div",{staticClass:"filter-item-m date",class:{active:t.isDateActive},on:{click:function(e){return t.$emit("openFilterPopup","date")}}},[e("div",{staticClass:"icon"}),t._v(" "),e("span",{staticClass:"filter-item-text"},[t._v(" Date & Length ")])]):t._e()])])}),[],!1,null,"e0da7c30",null);e.a=component.exports},595:function(t,e,r){t.exports=r.p+"img/icon_where_black_20@2x.4bdb759.png"},596:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAa5JREFUWEftWO1NwzAQPWcC2MBxFqATQDfJBoQJKBNAJwAmKRvQCeLbACa4I65sFCUhseOoCpUj9d99vDy/c/NOwMofsXJ8cJkAlVKamUFrnfucQGh8u+YsBpVSbIrUde2VHxp/GQCllFdZllVCiFtmvvM5yhkxRyJ6QcT3v3IHj0hKKbMsOwCAnNE0OIWZkZm3iIjd5EGARtTnAucAWZAbRPwe1WBRFCUzv7ogItoBwL6dGCr6oXgroRIAnluAds3gPY0CVEp9AsCNCSKiChH3XdpDr42x+Ab8Y1PfkACN1j+01tspgKcrxAK87lIeLLCJBMvklwvrXl09DbrjCLnnYkGP9UwAfdidzaBP8aVjgjS4dHOfekEAfT8GfBqPxcw+4gTQ0poYTBpsM5D+6gb0kIYkDUkakgkNzB4SIlrfJ3+e5wchhDPqPZcVOxADBqxyzo6Zj1rrzZRp+nVZNvCBiN6WNk9uc9GYOdPPmbSyu2XoeRKbaKznWbYKDpwx7kPbsv+5+nBvZbYMRHQvhDgZ+aUfY9TNr7u5GNXg0iBi63ktIGObxOQngDHsmdwfEQhbOCcHv1UAAAAASUVORK5CYII="},692:function(t,e,r){t.exports={}},922:function(t,e,r){"use strict";r(692)}}]);