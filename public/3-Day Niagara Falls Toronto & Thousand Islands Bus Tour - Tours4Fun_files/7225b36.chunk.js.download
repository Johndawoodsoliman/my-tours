(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1004:function(e,t,r){"use strict";r(758)},1221:function(e,t,r){"use strict";r.r(t);r(540);var o=r(5),c=(r(13),r(312),r(23),r(16),{name:"MyProductDisplayPrice",components:{MyCountDown:()=>r.e(42).then(r.bind(null,1253)),MyProductPriceGuaranteePopup:()=>r.e(48).then(r.bind(null,1251))},props:{soldOut:{type:Boolean,required:!0},displayPrice:{type:Object,required:!0},groupDiscount:{type:Number,default:0},baseInfo:{type:Object,required:!0},tagsInfo:{type:Array,required:!0},descriptionInfo:{type:Object,required:!0}},data:()=>({collect:0,timer:null,specialDays:0,specialHours:0,specialMinutes:0,specialSeconds:0}),computed:{displayPriceDescription(){return["1. ".concat(this.displayPrice.priceDescription),"2. The price of the product will vary according to the selected departure date, number of travelers. hotel/room type, upgrade items, additional services, etc. The actual price shall prevail when placing an order."]},discountTagsList(){var e=[];return this.tagsInfo.forEach((t=>{"Special Discounts"===t.tagCategoryName&&t.tags.forEach((t=>e.push(t)))})),e},showDiscountTags(){return this.discountTagsList.length>0||!this.displaySpecial&&this.groupDiscount},displaySpecial(){var e="",t=this.displayPrice.policyInfo;return t&&(t.isRetail&&"percent"===t.discountType&&(e="".concat(parseFloat((100-t.percent).toPrecision(12)),"%")),t.isRetail&&"amount"===t.discountType&&(e=this.$priceFormatter(this.displayPrice.originalDisplayPrice-this.displayPrice.displayPrice))),e},displayFreeCancellation(){var e="";return(this.baseInfo.finedPolicy||[]).forEach((t=>"100"===t.value&&(e=t.nearDay))),e?"Free Cancellation ".concat(e," or more Days Prior to Departure"):""},displayGroupDiscount(){return"Get ".concat(this.groupDiscount,"% off your tour package when you book this tour for a group of 10 or more traveller! This offer cannot be combined with other offers and cannot be applied to upgrades or addons.")},getEndTime(){var e,t=1e3*(null===(e=this.displayPrice)||void 0===e||null===(e=e.policyInfo)||void 0===e?void 0:e.purchaseEndDate);if(t){var r=this.$dateMoment();return this.$dateMoment(t).diff(r)<=6048e5?t:0}return 0}},watch:{baseInfo:{immediate:!0,handler(e){this.collect=Object.keys(e).length>0?e.isCollected:0}}},methods:{handleCollect(){var e=this;return Object(o.a)((function*(){var t=1===e.collect?"/api/user/removeWish":"/api/user/addWish";0===(yield e.$axios.post(t,{oldId:e.baseInfo.oldId})).data.code&&(1!==e.collect&&e.$GA4AddToWishlistEvent({price:e.displayPrice.displayPrice,product:e.baseInfo}),e.collect=1===e.collect?0:1)}))()},openPriceGuaranteePopup(){this.$refs.myProductPriceGuaranteePopup&&this.$refs.myProductPriceGuaranteePopup.openPriceGuaranteePopup()},toCheckAvailability(){var e=[];(this.baseInfo.departureCity||[]).forEach((t=>e.push(t.name))),this.$GA4CustomEvent("ProductDetailsPageButton_Click","Check Availability",{startCity:e.join(","),brand:this.baseInfo.providerId,productType:this.baseInfo.productTypeName,productSubType:this.baseInfo.productSubTypeName,productQuality:this.baseInfo.productQualityName}),this.$emit("toCheckAvailability")}}}),n=(r(1004),r(63)),component=Object(n.a)(c,(function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"my-product-display-price"}},[e.soldOut?[t("div",{staticClass:"my-product-display-price-button"},[t("el-button",{attrs:{disabled:""}},[e._v("Sold Out")]),e._v(" "),t("div",{staticClass:"my-product-display-price-button-collect"},[t("strong",{directives:[{name:"show",rawName:"v-show",value:0===e.collect,expression:"collect === 0"}],on:{click:e.handleCollect}}),e._v(" "),t("strong",{directives:[{name:"show",rawName:"v-show",value:1===e.collect,expression:"collect === 1"}],on:{click:e.handleCollect}})])],1)]:[e.showDiscountTags?t("div",{staticClass:"my-product-display-price-tag"},[e._l(e.discountTagsList,(function(r,o){return[r.description?t("el-popover",{key:o,attrs:{width:"200",placement:"top",trigger:"hover",content:r.description},scopedSlots:e._u([{key:"reference",fn:function(){return[t("div",{staticClass:"my-product-display-price-tag-discount"},[e._v(e._s(r.tagName))])]},proxy:!0}],null,!0)}):t("div",{key:o,staticClass:"my-product-display-price-tag-discount"},[e._v("\n                    "+e._s(r.tagName)+"\n                ")])]})),e._v(" "),!e.displaySpecial&&e.groupDiscount?t("el-popover",{attrs:{width:"200",placement:"top",trigger:"hover",content:e.displayGroupDiscount},scopedSlots:e._u([{key:"reference",fn:function(){return[t("div",{staticClass:"my-product-display-price-tag-group"},[e._v("\n                        "+e._s("".concat(e.groupDiscount,"% Group Discount"))+"\n                    ")])]},proxy:!0}],null,!1,582577662)}):e._e()],2):e._e(),e._v(" "),t("div",{staticClass:"my-product-display-price-item"},[e.displayPrice.displayPrice!==e.displayPrice.originalDisplayPrice?t("div",{staticClass:"my-product-display-price-item-original"},[t("span",[e._v("From")]),e._v(" "),t("s",[e._v(e._s(e.$priceFormatter(e.displayPrice.originalDisplayPrice)))])]):e._e(),e._v(" "),t("div",{staticClass:"my-product-display-price-item-display"},[t("strong",{class:{special:e.displaySpecial}},[e._v(e._s(e.$priceFormatter(e.displayPrice.displayPrice)))]),e._v(" "),t("s",[e._v("per person")]),e._v(" "),t("el-popover",{attrs:{width:"240",placement:"top",trigger:"hover"},scopedSlots:e._u([{key:"reference",fn:function(){return[t("i",{staticClass:"el-icon-warning-outline"})]},proxy:!0}])},[e._v(" "),e._l(e.displayPriceDescription,(function(r,o){return t("div",{key:o,domProps:{innerHTML:e._s(r)}})}))],2)],1),e._v(" "),e.displaySpecial?t("div",{staticClass:"my-product-display-price-item-special"},[t("span",[e._v("Save")]),e._v(" "),t("strong",[e._v(e._s(e.displaySpecial))])]):e._e()]),e._v(" "),e.displaySpecial&&e.getEndTime?t("div",{staticClass:"my-product-display-price-count-down"},[t("i",{staticClass:"el-icon-time"}),e._v(" "),t("strong",[e._v("Deals end:")]),e._v(" "),t("MyCountDown",{attrs:{"end-time":e.getEndTime}})],1):e._e(),e._v(" "),t("div",{staticClass:"my-product-display-price-button"},[t("el-button",{attrs:{type:"primary"},on:{click:e.toCheckAvailability}},[e._v("\n                Check Availability\n            ")]),e._v(" "),t("div",{staticClass:"my-product-display-price-button-collect"},[t("strong",{directives:[{name:"show",rawName:"v-show",value:0===e.collect,expression:"collect === 0"}],on:{click:e.handleCollect}}),e._v(" "),t("strong",{directives:[{name:"show",rawName:"v-show",value:1===e.collect,expression:"collect === 1"}],on:{click:e.handleCollect}})])],1),e._v(" "),t("div",{staticClass:"my-product-display-price-desc"},[t("div",{staticClass:"my-product-display-price-desc-item guaranteed",on:{click:e.openPriceGuaranteePopup}},[e._v("\n                Best Price Guaranteed\n            ")]),e._v(" "),"ttd"!==e.baseInfo.productLine?[e.baseInfo.autoConfirm?t("div",{staticClass:"my-product-display-price-desc-item instant"},[t("el-popover",{attrs:{width:"200",placement:"top",trigger:"hover"},scopedSlots:e._u([{key:"reference",fn:function(){return[t("span",[e._v("Instant Confirmation")])]},proxy:!0}],null,!1,720028921)},[e._v(" "),t("div",{domProps:{innerHTML:e._s(e.baseInfo.autoConfirm)}})])],1):e._e(),e._v(" "),e.displayFreeCancellation?t("div",{staticClass:"my-product-display-price-desc-item cancellation"},[e._v("\n                    "+e._s(e.displayFreeCancellation)+"\n                ")]):e._e()]:e._e()],2)],e._v(" "),t("MyProductPriceGuaranteePopup",{ref:"myProductPriceGuaranteePopup"})],2)}),[],!1,null,"002a6d13",null);t.default=component.exports},758:function(e,t,r){e.exports={}}}]);