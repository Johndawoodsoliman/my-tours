(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1037:function(e,t,o){"use strict";o(777)},1038:function(e,t,o){"use strict";o(778)},1233:function(e,t,o){"use strict";o.r(t);var n=o(5),r=(o(13),o(23),o(16),{name:"MyProductQA",components:{MyPagination:()=>o.e(2).then(o.bind(null,1207)),MyCustomPopup:()=>o.e(0).then(o.bind(null,1191))},props:{productId:{type:String,required:!0}},data(){return{qaLoading:!1,qaListLoaded:!1,keyword:"",currentPage:1,pageSize:5,total:0,qaTotal:0,list:[],askQuestionPopup:!1,formLoading:!1,askQuestionForm:{username:"",email:"",confirmEmail:"",country_code:this.$store.state.countryCode,phone:"",questions:""},askQuestionRules:{username:{required:!0,message:this.$t("components.MyCheckBooking.PleaseEnter"),trigger:"blur"},email:[{required:!0,message:this.$t("components.MyCheckBooking.PleaseEnter"),trigger:"change"},{pattern:this.$store.state.emailRegExp,message:this.$t("components.MyCheckBooking.PleaseEnterValidEmail"),trigger:["blur","change"]}],confirmEmail:{required:!0,validator:(e,t,o)=>{""===t?o(new Error("Please enter mail")):t!==this.askQuestionForm.email?o(new Error("The email addresses entered are inconsistent")):o()},trigger:"blur"},phone:[{required:!0,message:this.$t("components.MyCheckBooking.PleaseEnter"),trigger:["blur","change"]},{min:6,max:14,message:this.$t("components.MyCheckBooking.PleaseEnterValidPhoneNumber"),trigger:"change"}],questions:{required:!0,message:this.$t("components.MyCheckBooking.PleaseEnter"),trigger:"blur"}}}},mounted(){this.getQuestions()},methods:{getQuestions(){var e=arguments,t=this;return Object(n.a)((function*(){var o=e.length>0&&void 0!==e[0]?e[0]:1;t.qaLoading=!0;var data=yield t.$axios.get("/api/product/getTourQuestion",{params:{page:o,pageSize:t.pageSize,keyword:t.keyword,productId:t.productId}});0===data.data.code&&(t.qaLoading=!1,t.qaListLoaded=!0,t.currentPage=o,t.total=data.data.data.total,t.list=data.data.data.records||[],!t.keyword&&(t.qaTotal=data.data.data.total))}))()},getQuestionPop(){this.askQuestionPopup=!0},closeAskQuestionForm(){this.askQuestionPopup=!1},confirmAskQuestionForm(){var e=this;this.$refs.askQuestionFormRef.validate(function(){var t=Object(n.a)((function*(t){if(t){e.formLoading=!0;var data=yield e.$axios.post("/api/product/createProductQA",{username:e.askQuestionForm.username,productId:e.productId,email:e.askQuestionForm.email,phone:"".concat(e.askQuestionForm.country_code.split("-")[1],"-").concat(e.askQuestionForm.phone),question:e.askQuestionForm.questions});e.formLoading=!1,0===data.data.code?(e.$message.success("Question successful!"),e.askQuestionPopup=!1):e.$message.error(data.data.msg)}}));return function(e){return t.apply(this,arguments)}}())},closedAskQuestionForm(){this.$refs.askQuestionFormRef.resetFields()},resetQuestions(){this.keyword="",this.getQuestions()}}}),l=r,c=(o(1037),o(1038),o(63)),component=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"my-product-qa"}},[t("h2",{staticClass:"my-product-qa-header"},[e._v("Q & A")]),e._v(" "),e.qaListLoaded?[e.qaTotal>0?t("div",{staticClass:"search-box"},[t("el-input",{staticClass:"search-input",attrs:{placeholder:"Type your question"},scopedSlots:e._u([{key:"suffix",fn:function(){return[t("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(t){return e.getQuestions()}}},[e._v("\n                        Search\n                    ")])]},proxy:!0}],null,!1,1766861194),model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[t("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1):e._e(),e._v(" "),e.total>0?t("div",{staticClass:"question-box"},[t("el-collapse",e._l(e.list,(function(o,n){return t("el-collapse-item",{key:n},[t("template",{slot:"title"},[t("p",{staticClass:"q-title"},[e._v(e._s(o.question))])]),e._v(" "),t("div",{staticClass:"the-answer"},[t("div",{staticClass:"answers",domProps:{innerHTML:e._s(o.answer)}}),e._v(" "),t("p",{staticClass:"the-time"},[e._v(e._s(e.$dateMoment(o.answerDate).format("MMMM DD, YYYY")))])])],2)})),1)],1):e._e(),e._v(" "),t("div",{staticClass:"page-box"},[t("MyPagination",{attrs:{"current-page":e.currentPage,total:e.total,"page-size":e.pageSize},on:{change:e.getQuestions}})],1),e._v(" "),e.keyword&&0===e.total?t("div",{staticClass:"no-result"},[t("p",[e._v("We could't find results")]),e._v(" "),t("div",{staticClass:"no-result-btn"},[e._v("\n                Try a differen search term. \n                "),t("span",{on:{click:e.resetQuestions}},[e._v("Back to all questions.")])])]):e._e()]:e._e(),e._v(" "),t("div",{staticClass:"more-question"},[t("div",{staticClass:"more-question-title"},[e._v("Canâ€™t find the answer to your question?")]),e._v(" "),t("p",[e._v("Can't find your answer? Ask us your question and we will respond within the next 24 hours.")]),e._v(" "),t("el-button",{staticClass:"ask-btn",attrs:{plain:""},on:{click:e.getQuestionPop}},[e._v("Ask a Question")])],1),e._v(" "),t("MyCustomPopup",{attrs:{width:700,height:540,title:"Ask a Question"},on:{closed:e.closedAskQuestionForm},model:{value:e.askQuestionPopup,callback:function(t){e.askQuestionPopup=t},expression:"askQuestionPopup"}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],staticClass:"ask-question-popup"},[t("el-form",{ref:"askQuestionFormRef",attrs:{"label-position":"top",model:e.askQuestionForm,rules:e.askQuestionRules,"hide-required-asterisk":""}},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{prop:"username"}},[t("template",{slot:"label"},[t("p",{staticClass:"form-title"},[e._v("Your Name")])]),e._v(" "),t("el-input",{staticClass:"my-check-booking-input",attrs:{placeholder:"Please enter"},model:{value:e.askQuestionForm.username,callback:function(t){e.$set(e.askQuestionForm,"username",t)},expression:"askQuestionForm.username"}})],2)],1),e._v(" "),t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{prop:"email"}},[t("template",{slot:"label"},[t("p",{staticClass:"form-title"},[e._v("Your Email "),t("span",[e._v("(required but will never be displayed)")])])]),e._v(" "),t("el-input",{attrs:{placeholder:"Please enter"},model:{value:e.askQuestionForm.email,callback:function(t){e.$set(e.askQuestionForm,"email",t)},expression:"askQuestionForm.email"}})],2)],1)]),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{prop:"confirmEmail"}},[t("template",{slot:"label"},[t("p",{staticClass:"form-title"},[e._v("Confirm Email")])]),e._v(" "),t("el-input",{attrs:{placeholder:"Please enter"},model:{value:e.askQuestionForm.confirmEmail,callback:function(t){e.$set(e.askQuestionForm,"confirmEmail",t)},expression:"askQuestionForm.confirmEmail"}})],2)],1),e._v(" "),t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{prop:"phone"}},[t("template",{slot:"label"},[t("p",{staticClass:"form-title"},[e._v("Your Mobile")])]),e._v(" "),t("el-row",{attrs:{gutter:8}},[t("el-col",{attrs:{span:8}},[t("el-select",{attrs:{filterable:""},model:{value:e.askQuestionForm.country_code,callback:function(t){e.$set(e.askQuestionForm,"country_code",t)},expression:"askQuestionForm.country_code"}},e._l(e.$store.state.areaCode,(function(o,n){return t("el-option",{key:n,attrs:{label:"+".concat(o.countryCode),value:"".concat(o.countryCodeTwo,"-").concat(o.countryCode)}},[t("span",[e._v(e._s("".concat(o.countryName,"(+").concat(o.countryCode,")")))])])})),1)],1),e._v(" "),t("el-col",{attrs:{span:16}},[t("el-input",{attrs:{placeholder:"Please enter"},model:{value:e.askQuestionForm.phone,callback:function(t){e.$set(e.askQuestionForm,"phone",t)},expression:"askQuestionForm.phone"}})],1)],1)],2)],1)]),e._v(" "),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"questions"}},[t("template",{slot:"label"},[t("p",{staticClass:"form-title"},[e._v("Your Question "),t("span",[e._v("(NOTE HTML is not translated)")])])]),e._v(" "),t("el-input",{attrs:{type:"textarea",placeholder:"Please enter",resize:"none",rows:5},model:{value:e.askQuestionForm.questions,callback:function(t){e.$set(e.askQuestionForm,"questions",t)},expression:"askQuestionForm.questions"}})],2)],1)],1)],1),e._v(" "),t("div",{staticClass:"my-ask-question-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.confirmAskQuestionForm}},[e._v("\n                    Confirm\n                ")]),e._v(" "),t("el-button",{on:{click:e.closeAskQuestionForm}},[e._v("\n                    Cancel\n                ")])],1)],1)])],2)}),[],!1,null,"44be6d27",null);t.default=component.exports},777:function(e,t,o){e.exports={}},778:function(e,t,o){e.exports={}}}]);