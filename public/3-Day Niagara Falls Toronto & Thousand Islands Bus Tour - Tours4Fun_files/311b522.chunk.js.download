(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1032:function(e,t,r){e.exports=r.p+"img/icon_head.9222831.png"},1033:function(e,t,r){e.exports=r.p+"img/icon_logo.cd0267f.png"},1034:function(e,t,r){"use strict";r(774)},1035:function(e,t,r){"use strict";r(775)},1231:function(e,t,r){"use strict";r.r(t);r(540),r(316);var o=r(5),l=(r(13),r(23),r(16),{name:"MyProductReviews",components:{MyReadMore:()=>r.e(5).then(r.bind(null,1252)),MyPagination:()=>r.e(2).then(r.bind(null,1207))},props:{productId:{type:Number,required:!0}},data:()=>({reviewLoading:!1,reviewListLoaded:!1,currentPage:1,pageSize:5,ratingStar:0,reviewTotal:0,ratingTotalList:[],reviewList:[],reviewImageList:[],previewReviewImageList:[]}),mounted(){this.getReviewImage(),this.getReviewList()},methods:{getReviewImage(){var e=this;return Object(o.a)((function*(){var data=yield e.$axios.get("/api/product/getTravelerPhoto",{params:{oldId:e.productId}});0===data.data.code&&(e.reviewImageList=data.data.data,e.reviewImageList.forEach((t=>e.previewReviewImageList.push(t.name))))}))()},getReviewList(){var e=arguments,t=this;return Object(o.a)((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:1;t.reviewLoading=!0;var data=yield t.$axios.get("/api/product/reviewList",{params:{page:r,pageSize:t.pageSize,oldId:t.productId}});0===data.data.code&&(t.reviewLoading=!1,t.reviewListLoaded=!0,t.currentPage=r,t.ratingStar=data.data.data.ratingStar,t.reviewTotal=data.data.data.reviewTotal,t.ratingTotalList=data.data.data.ratingTotalList,t.reviewList=data.data.data.reviewList||[],t.reviewTotal>0&&t.$emit("updateProductTabsOption",{name:"Reviews",sort:5,offset:0}))}))()},showLetters:(e,t)=>t?e.split("")[0]+t.split("")[0]:e.split("")[0],handleScrollIntoView(){var e=this.$refs.MyProductReviewsRef.offsetTop;window.scrollTo({top:e-56})}}}),n=l,v=(r(1034),r(1035),r(63)),component=Object(v.a)(n,(function(){var e=this,t=e._self._c;return e.reviewTotal>0?t("div",{ref:"MyProductReviewsRef",attrs:{id:"my-product-reviews"}},[t("h2",{staticClass:"my-product-reviews-header"},[e._v("Reviews")]),e._v(" "),e.reviewListLoaded?[t("div",{staticClass:"review-judge"},[t("div",{staticClass:"score"},[t("div",{staticClass:"score-stars"},[t("div",{staticClass:"score-stars-rate"},[e._v(e._s(e.ratingStar.toFixed(1)))]),e._v(" "),t("el-rate",{staticClass:"rates",attrs:{value:e.ratingStar,disabled:"","allow-half":""}})],1),e._v(" "),t("p",{staticClass:"counts"},[e._v(e._s(e.reviewTotal)+" "),t("span",[e._v("reviews")])])]),e._v(" "),t("div",{staticClass:"judge-list"},e._l(e.ratingTotalList,(function(r,o){return t("div",{key:o,staticClass:"list-item"},[t("div",{staticClass:"list-item-title"},[e._v(e._s(r.title))]),e._v(" "),t("p",[e._v(e._s(r.value))])])})),0)]),e._v(" "),e.reviewImageList.length>0?t("div",{staticClass:"traveler-photos"},[t("div",{staticClass:"t-title"},[e._v("Traveler Photos")]),e._v(" "),t("el-tabs",e._l(e.reviewImageList,(function(r,o){return t("el-tab-pane",{key:o,attrs:{name:String(r.photoId)}},[t("div",{attrs:{slot:"label"},slot:"label"},[t("el-image",{attrs:{src:e.$getImageUrl(r.name),alt:"customer photos","preview-src-list":e.previewReviewImageList}})],1)])})),1)],1):e._e(),e._v(" "),e.reviewList.length>0?t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.reviewLoading,expression:"reviewLoading"}],staticClass:"reviews-list"},e._l(e.reviewList,(function(o,l){return t("div",{key:l,staticClass:"review-item"},[t("div",{staticClass:"infos"},[o.firstName&&"Anonymous"!==o.firstName?t("p",{staticClass:"letters-head"},[e._v("\n                        "+e._s(e.showLetters(o.firstName,o.lastName)))]):t("div",{staticClass:"pic-head"},[t("img",{attrs:{src:r(1032),alt:""}})]),e._v(" "),t("div",{staticClass:"name-rate"},[t("p",{staticClass:"names"},[e._v(e._s(o.firstName+" "+o.lastName)+"\n                            "),t("span",[e._v(e._s(e.$dateMoment(o.created).format("MMMM DD, YYYY")))])]),e._v(" "),t("el-rate",{staticClass:"rate-item",attrs:{disabled:"","allow-half":""},model:{value:o.ratingTotal,callback:function(t){e.$set(o,"ratingTotal",t)},expression:"item.ratingTotal"}})],1)]),e._v(" "),t("div",{staticClass:"comments"},[t("div",{staticClass:"c-title"},[e._v(e._s(o.name))]),e._v(" "),t("MyReadMore",{attrs:{height:100}},[t("p",{staticClass:"the-fonts"},[e._v(e._s(o.description))])]),e._v(" "),t("div",{staticClass:"pics"},e._l(o.image,(function(i,r){return t("el-image",{key:r,staticClass:"the-pic",attrs:{"preview-src-list":o.image,src:e.$getImageUrl(i),alt:"customer photos"}})})),1),e._v(" "),o.reviewResponse?t("div",{staticClass:"reply"},[t("img",{staticClass:"reply-head",attrs:{src:r(1033),alt:""}}),e._v(" "),t("div",{staticClass:"reply-body"},[t("p",{staticClass:"reply-names"},[e._v("Tours4fun has responded to this review\n                                "),t("span",[e._v(e._s(e.$dateMoment(o.responseDate).format("MMMM DD, YYYY")))])]),e._v(" "),t("MyReadMore",{attrs:{height:120}},[t("p",{staticClass:"reply-content"},[e._v(e._s(o.reviewResponse))])])],1)]):e._e()],1)])})),0):e._e(),e._v(" "),t("div",{staticClass:"page-box"},[t("MyPagination",{attrs:{"current-page":e.currentPage,total:e.reviewTotal,"page-size":e.pageSize},on:{change:e.getReviewList}})],1)]:e._e()],2):e._e()}),[],!1,null,"3562cd60",null);t.default=component.exports},774:function(e,t,r){e.exports={}},775:function(e,t,r){e.exports={}}}]);